<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deposit</title>
</head>
<style>
     *{
        margin: 0;
        padding: 0;
    }
    body{
        background-color: #252525;
        display: flex;
        justify-content: center;
        font-family: sans-serif;

    }

    .warning{
        color: #8B0C0C;
    }
    .green{
        color: #307D2F;
    }

    .app{
        background-color: #f7f7f7;

        max-width:450px ;
        width: 100%;
    }

    .enter-deposit-box-container{
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 50px;
        padding: 15px;
    }
    .enter-deposit-title{
        font-size: 18px;
        padding: 10px;
    }
    .enter-deposit-input{
        font-size: 20px;
        padding: 8px;
        text-align: center;
        border-radius: 5px;
        border: 1px solid #d5d5d5;
        margin-bottom: 30px;
    }
    .account-info-box{
        display: flex;
        flex-wrap: wrap;
        background-color: white;
        border-radius: 20px;
        border: 1px solid #d5d5d5;

        margin: 30px 0;
        padding: 20px;
    }
    .account-info{
        flex-basis: 50%;
    }
    .usdt-box{
        text-align: center;
        background-color: white;
        border-radius: 20px;
        border: 1px solid #d5d5d5;
        width: 70%;
        margin: 30px 0;
        padding: 10px;
        font-size: 20px;
    }
    .divider{
        background-color: #e6e6e6;
        height: 3px;
        width: 100%;
        margin : 20px 0;
    }
    .deposit-history-box{
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        min-height: 400px;
    }
    .deposit-history-title{
        width: 100%;

    }
    .deposit-box{
        display: flex;
        justify-content: space-between;
        width: 90%;
        background-color: #f7f7f7;
        padding: 5px;
        border: 1px solid #d5d5d5;
        margin: 10px 0;

    }



    .navbar{
        background-color: white;
        display: flex;
        justify-content: space-between;
        padding: 20px 20px;
        border: 1px solid rgb(235, 235, 235);
        box-shadow: 0 1px 3px #00c386;
        position: sticky;
        top: 0;
        z-index: 1;
    }

    .navbar > img {
        cursor: pointer;
        height: 40px;
    }


    .menu-box{
        position: sticky;
        background-color: white;
        height: 100vh;
        
        top: 0;

        display: none;
        flex-direction: column;
        padding: 20px;
        z-index: 2;

    }
    .menu-close-button{
        text-align: right;
        font-size: 40px;
        
        cursor: pointer;
        color: #00c386;
    }
    .menu-option{
        font-size: 24px;
        text-align: center;
        padding: 20px 0;

    }
    .menu-option > a{
        text-decoration: none;
        color: black;
    }
</style>
<body>

<div class="app">
    <div class="menu-box">
        <div class="menu-close-button">
            &#x2715;
        </div>
        <div class="menu-option">
            <a href="/user">Dashboard</a>
        </div>
        <div class="menu-option">
            <a href="/deposit">Deposit</a>
        </div>
        <div class="menu-option">
            <a href="/withdraw">Withdraw</a>
        </div>

        <div class="menu-option">Contact Us</div>
        <div class="menu-option">Support</div>

        <div class="menu-option">
            <a href="/logout">Logout</a>
        </div>
    </div>




<nav class="navbar">
    <img height="40" src="./logo6.png">
    <img class="menu-open-button" src="./proflie.png">
</nav>



    <div class="enter-deposit-box-container">
        <div class="enter-deposit-title">
            Enter The Amount You Want To Deposit
        </div>
        <input class="enter-deposit-input" placeholder="Enter amount in INR">
        <div class="enter-deposit-title">
            Open Binance Pay Enter The Amount In
            USDT (Which Is Given Below) 
        </div>
        <img width="100%" src="./deposit.png">
        <div class="account-info-box">
            <div class="account-info">PAY ID</div>
            <div class="account-info">539130647</div>
            <div class="account-info">Account Name</div>
            <div class="account-info">Tradesy-111</div>
        </div>
        <div class="enter-deposit-title warning">
            Make sure to enter your Account Email in the note section.
            It Is Compulsory To Help Us Recognise Its You.
        </div>
        <div class="usdt-box">
            0 USDT
        </div>
        <div class="enter-deposit-title">
            Transfer Given Amount Of  USDT To The Wallet Which
 Is Equivalent To The Amount You Want To Deposite
        </div>
        <div class="divider"></div>
        
        <div class="enter-deposit-title green">
            Note: Direct Deposite Service With UPI Is 
Currently Closed Due To Some Technical 
Issues, It Will Be Recontinued Shortly
        </div>
    </div>

    <div class="divider"></div>



    <div class="deposit-history-box">
        <div class="deposit-history-title">Deposit History --- ></div>
        <!-- <div class="deposit-box">
            <span>$120</span>
            <span>COMPLETED</span>
            <span>9/9/2023, 12:50:36 AM</span>

        </div> -->
    </div>


</div>

<script>

    function precisionTo(number, precison) {

        let result
        let csplit = number.toString().split(".")

        if (precison == 0) {
            result = Math.floor(number)

        } else if (csplit.length == 1) {
            result = number

        } else {
            csplit[1] = csplit[1].substring(0, precison)
            result = Number(csplit.join("."))
        }


        console.log(number, result, precison)
        return result
    }


    document.querySelector(".enter-deposit-input").addEventListener('change', () => {
        let usdt = Number(document.querySelector(".enter-deposit-input").value) / 90
        console.log(usdt)
        document.querySelector(".usdt-box").innerText = precisionTo(usdt, 2) + " USDT"
    })


    function getDepositHistory(){

        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "/data/user/deposit-history");
        xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


        xhttp.send()

        xhttp.onload = function () {

            console.log(this.responseText)
            let response = JSON.parse(this.responseText)

            if (response.redirect == true) {
                window.location = response.redirectLink
            }



            let deposits = response.msg
            console.log(deposits)

            deposits.forEach(deposit => {
                //document.querySelector('.trade-result').innerText += "\n" + trade.side + " of ₹ " + trade.amountInr + " Result : " + trade.progress
                
                let spanAmount = document.createElement('span')
                let spanStatus = document.createElement('span')
                let spanDate = document.createElement('span')


                spanAmount.innerText = "₹ "+ deposit.amount
                spanStatus.innerText = "COMPLETED"
                spanDate.innerText = new Date(deposit.time).toLocaleDateString()

                let div = document.createElement('div')
                div.className = "deposit-box"


                div.appendChild(spanAmount)
                div.appendChild(spanStatus)
                div.appendChild(spanDate) 

                document.querySelector('.deposit-history-box').appendChild(div)


            });


        }

    }


    /// event listener


    document.querySelector('.menu-close-button').addEventListener('click', () => {
        document.querySelector('.menu-box').style.display = "none"
        
    })

    document.querySelector('.menu-open-button').addEventListener('click', () => {
        document.querySelector('.menu-box').style.display = "flex"
        
    })



    // onload


    getDepositHistory()

</script>
</body>
</html>