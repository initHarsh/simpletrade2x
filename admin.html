<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
</head>
<body>
    <div class="info-box">
        <h1>Number of Registered Users : <span class="number-of-user"> fetching </span></h1>
        <h1>Number of Users Trading : <span class="number-of-user-trading"> fetching </span></h1>
        <h1>Number of Pending Withdaw : <span class="number-of-withdraw"> fetching </span></h1>
        <h2> <a href="/admin/withdraw"> Approve Withdraw : </a></h2>



    </div>

    <div class="get-balance-box">
        <h2>Get Balance</h2>
       <div class="get-balance-submit-button">Submit</div>
        <div class="get-balance-response"></div>

    </div>

    <hr>

    <div class="query-user-box">
        <h2>Query User details</h2>
        <p>Email</p>
        <input type="text" class="query-user-email" placeholder="enter email">
        <div class="query-user-submit-button">Submit</div>
        <div class="query-user-response"></div>

    </div>

    <hr>

    <div class="add-deposit-box" >
        <h2>Add Deposit</h2>
        <p>Email</p>
        <input type="text" class="add-deposit-email" placeholder="enter email">
        <p>Deposit amount</p>
        <input type="text" class="add-deposit-amount" placeholder="enter deposit amount">
        <div class="add-deposit-submit-button">Submit</div>
        <div class="add-deposit-response"></div>


    </div>

    <hr>

    <div class="block-user-trade-box">
        <h2>Block user trade</h2>
        <p>Email</p>
        <input type="text" class="block-user-trade-email" placeholder="enter email">
        <div class="block-user-trade-submit-button">Submit</div>
        <div class="block-user-trade-response"></div>

    </div>

    <hr>

    <div class="unblock-user-trade-box">
        <h2>Unblock user trade</h2>
        <p>Email</p>
        <input type="text" class="unblock-user-trade-email" placeholder="enter email">
        <div class="unblock-user-trade-submit-button">Submit</div>
        <div class="unblock-user-trade-response"></div>

    </div>

    <hr>

    <div class="user-trade-profit-box">
        <h2>Make user trade Profit</h2>
        <p>Email</p>
        <input type="text" class="user-trade-profit-email" placeholder="enter email">
        <input type="text" class="user-trade-profit-price" placeholder="enter price">

        <div class="user-trade-profit-submit-button">Submit</div>
        <div class="user-trade-profit-response"></div>

    </div>

    <hr>

    <div class="user-trade-loss-box">
        <h2>Make user trade loss</h2>
        <p>Email</p>
        <input type="text" class="user-trade-loss-email" placeholder="enter email">
        <input type="text" class="user-trade-loss-price" placeholder="enter price">

        <div class="user-trade-loss-submit-button">Submit</div>
        <div class="user-trade-loss-response"></div>

    </div>

    <hr>


<script>














// functions






function numberOfWithdraw(){

    var xhttp = new XMLHttpRequest();
    xhttp.open("GET","/admin/withdraw-list/length");
    xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


    xhttp.send( )


    xhttp.onload = function(){
        let response = JSON.parse(this.responseText)

        document.querySelector('.number-of-withdraw').innerText = JSON.stringify( response.msg )
      
    }
}


function numberOfUser(){

var xhttp = new XMLHttpRequest();
xhttp.open("GET","/admin/user-list/length");
xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


xhttp.send( )


xhttp.onload = function(){
    let response = JSON.parse(this.responseText)

    document.querySelector('.number-of-user').innerText = JSON.stringify( response.msg )
  
}
}


function numberOfTradingUser(){

var xhttp = new XMLHttpRequest();
xhttp.open("GET","/admin/user-trading-list/length");
xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


xhttp.send( )


xhttp.onload = function(){
    let response = JSON.parse(this.responseText)

    document.querySelector('.number-of-user-trading').innerText = JSON.stringify( response.msg )
  
}
}



function getBalance(){
    document.querySelector('.get-balance-response').innerText = "fetching"


var xhttp = new XMLHttpRequest();
xhttp.open("GET","/admin/balance");
xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


xhttp.send( )


xhttp.onload = function(){
    let response = JSON.parse(this.responseText)

    document.querySelector('.get-balance-response').innerText = JSON.stringify( response.msg )
  
}
}








function queryUser(){
    // clear the response area
    document.querySelector('.query-user-response').innerText = "fetching"

    let queryUserEmail = document.querySelector('.query-user-email').value

    var xhttp = new XMLHttpRequest();
    xhttp.open("POST","/admin/query/user");
    xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

    let formData = {
        email : queryUserEmail
    }
    xhttp.send( JSON.stringify(formData) )


    xhttp.onload = function(){
        let response = JSON.parse(this.responseText)

        document.querySelector('.query-user-response').innerText = JSON.stringify( response.msg )
      
    }
}


function addDeposit(){
    // clear the response area
    document.querySelector('.add-deposit-response').innerText = "fetching"

    let addDepositEmail = document.querySelector('.add-deposit-email').value
    let addDepositAmount = document.querySelector('.add-deposit-amount').value


    var xhttp = new XMLHttpRequest();
    xhttp.open("POST","/admin/add/deposit");
    xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

    let formData = {
        email : addDepositEmail ,
        amount : addDepositAmount
    }

    xhttp.send( JSON.stringify(formData) )


    xhttp.onload = function(){
        let response = JSON.parse(this.responseText)

        document.querySelector('.add-deposit-response').innerText = JSON.stringify( response.msg )
      
    }
}



function blockUserTrade(){
    // clear the response area
    document.querySelector('.block-user-trade-response').innerText = "fetching"

    let blockUserTradeEmail = document.querySelector('.block-user-trade-email').value


    var xhttp = new XMLHttpRequest();
    xhttp.open("POST","/admin/block/user-trade");
    xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

    let formData = {
        email : blockUserTradeEmail
    }

    xhttp.send( JSON.stringify(formData) )


    xhttp.onload = function(){
        let response = JSON.parse(this.responseText)

        document.querySelector('.block-user-trade-response').innerText = JSON.stringify( response.msg )
      
    }
}



function unblockUserTrade(){
    // clear the response area
    document.querySelector('.unblock-user-trade-response').innerText = "fetching"

    let unblockUserTradeEmail = document.querySelector('.unblock-user-trade-email').value


    var xhttp = new XMLHttpRequest();
    xhttp.open("POST","/admin/unblock/user-trade");
    xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

    let formData = {
        email : unblockUserTradeEmail
    }

    xhttp.send( JSON.stringify(formData) )


    xhttp.onload = function(){
        let response = JSON.parse(this.responseText)

        document.querySelector('.unblock-user-trade-response').innerText = JSON.stringify( response.msg )
      
    }
}





function userTradeProfit(){
    // clear the response area
    document.querySelector('.user-trade-profit-response').innerText = "fetching"

    let userTradeProfitEmail = document.querySelector('.user-trade-profit-email').value
    let userTradeProfitPrice = document.querySelector('.user-trade-profit-price').value



    var xhttp = new XMLHttpRequest();
    xhttp.open("POST","/admin/user/resolve-trade/profit");
    xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

    let formData = {
        email : userTradeProfitEmail,
        price : userTradeProfitPrice
    }

    xhttp.send( JSON.stringify(formData) )


    xhttp.onload = function(){
        let response = JSON.parse(this.responseText)

        document.querySelector('.user-trade-profit-response').innerText = JSON.stringify( response.msg )
      
    }
}


function userTradeLoss(){
    // clear the response area
    document.querySelector('.user-trade-loss-response').innerText = "fetching"

    let userTradeLossEmail = document.querySelector('.user-trade-loss-email').value
    let userTradeLossPrice = document.querySelector('.user-trade-loss-price').value



    var xhttp = new XMLHttpRequest();
    xhttp.open("POST","/admin/user/resolve-trade/loss");
    xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

    let formData = {
        email : userTradeLossEmail,
        price : userTradeLossPrice

    }

    xhttp.send( JSON.stringify(formData) )


    xhttp.onload = function(){
        let response = JSON.parse(this.responseText)

        document.querySelector('.user-trade-loss-response').innerText = JSON.stringify( response.msg )
      
    }
}



// event listeners


    document.querySelector('.get-balance-submit-button').addEventListener('click',()=>{
        getBalance()
    })



    document.querySelector('.query-user-submit-button').addEventListener('click',()=>{
        queryUser()
    })



    document.querySelector('.add-deposit-submit-button').addEventListener('click',()=>{
        addDeposit()
    })

    document.querySelector('.block-user-trade-submit-button').addEventListener('click',()=>{
        blockUserTrade()
    })

    document.querySelector('.unblock-user-trade-submit-button').addEventListener('click',()=>{
        unblockUserTrade()
    })

    document.querySelector('.user-trade-profit-submit-button').addEventListener('click',()=>{
        userTradeProfit()
    })

    document.querySelector('.user-trade-loss-submit-button').addEventListener('click',()=>{
        userTradeLoss()
    })
// on load functions
numberOfWithdraw()
numberOfUser()
numberOfTradingUser()

</script>
    
</body>
</html>